<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Socket.io</title>
        <link rel="stylesheet" href="/css/bootstrap.min.css">
    </head>
 
    <body>
        <div class="container">
            <h1>Page d'accueil</h1>


            <form action="">
                <div class="form-group">
                    <label class="col-form-label col-form-label-lg" for="nickname">Choissiez un pseudo</label>
                    <input class="form-control form-control-lg" type="text" placeholder="..." id="nickname">
                </div>

                <input type="submit" class="btn btn-primary" value="Créer une salle privée" />
            </form>
            
        </div>

        <input type="button" value="Embêter le serveur" id="poke" class="btn btn-success block"/>



        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io.connect();

            $('form').submit(function(e) {
                e.preventDefault();
                
                return false;
            });

            $("input#nickname").focusout(function() { 
                let pseudo = $('input#nickname').val();

                if (pseudo === ''){
                    $('input#nickname').removeClass('is-valid');
                    $('input#nickname').addClass('is-invalid');
                    socket.emit('nickname', pseudo);
                }else{
                    $('input#nickname').removeClass('is-invalid');
                    $('input#nickname').addClass('is-valid');
                    socket.emit('nickname', pseudo);
                }
            }); 


                
            
            // Lorsqu'on clique sur le bouton, on envoie un "message" au serveur
            $('#poke').click(function () {
                socket.emit('message', ' est connecté(e)');
            })
        </script>
    </body>
</html>